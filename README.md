[![Build Status](https://travis-ci.org/angus-c/waldo.png?branch=master)](http://travis-ci.org/angus-c/waldo)

#Waldo

I got frustrated looking for specific properties and values within JavaScript object trees â€“ so I created a utility to do it for me.

Waldo lets you search gloablly or within an object tree. You can search by property name, property type or property value. You can also create your own custom search functions. Waldo can be run as an npm module, or a global file and there's also an autogenerated bookmarklet you can use for doing quick checks in the console.

## API

### byName

```
// Find properties named 'read' anywhere
var waldo = require('waldo');

var matches = waldo.byName('read');
matches.length; // 1
matches[0].value; // [the function]
matches[0].log(); // =>
  'GLOBAL.module.exports.repl.inputStream.read -> (function) [object Function]'
```

```
// ES 6
// Find properties named 'oneOfType' in React
import waldo from 'waldo';
import React from 'react';

const matches = waldo.byName('oneOfType', react);
matches[0].path; // => 'SRC.PropTypes.oneOfType'
matches[0].type; // => 'function'
```

### byValue
```
// Global search for all properties with the value 10
import waldo from 'waldo';

const matches = waldo.byValue(10);
matches.length // => 4;

// pretty print the results...
// (when running globally these logs appear in the console by default)
matches.forEach(m => m.log()); // =>
  GLOBAL.module.exports.repl._maxListeners -> (number) 10
  GLOBAL.module.exports.repl.rli._maxListeners -> (number) 10
  GLOBAL.module.exports.repl.outputStream._maxListeners -> (number) 10
  GLOBAL.module.exports.repl.inputStream._maxListeners -> (number) 10
```

### byValueCoerced

This method does an == comaprison

```
// get all falsey values globally
waldo.byValueCoerced(false); // =>
  GLOBAL.deviceIsAndroid -> (boolean) false
  GLOBAL.deviceIsIOS -> (boolean) false
  GLOBAL.defaultstatus -> (string) ''
  GLOBAL.GitHub.support.setImmediate -> (boolean) false
  GLOBAL.chrome.app.isInstalled -> (boolean) false
  etc..
```

### byType
```
let a = {
  aa: ['x', 'y', 'z'],
  bb: {
    bbb: [1, 2, 3],
    ccc: 54
  }
};

waldo.byType(Array, a); // =>
  SRC.aa -> (object) x,y,z
  SRC.bb.bbb -> (object) 1,2,3
```

### custom

```
// find all true values beginning with 'c'
var vegetables = {
  carrots: {
    chopped: false,
    cleaned: true
  }
  leaks: {
    chopped: true,
    cleaned: false
  }
};

waldo.custom(function(what, obj, prop) {
  return (obj[prop] === true) && (!prop.indexOf('c'));
}, comestibles); // =>
  SRC.leaks.chopped -> (boolean) true
  SRC.carrots.cleaned -> (boolean) true
```

##Installation

#####1. Using the npm module

```
npm install waldo
```

#####2. Standalone

Clone this repo and run `make build` to generate the standalone bundles `waldobundle.js` and `waldobundle.min.js`.

##Usage

#####1. Using the npm module

```
// ES 5
var waldo = require('waldo');

// global search for all properties named 'home'
var matches = waldo.byName('home');

// search the react source code for all properties names 'map'
var React = require('react');
var matches = waldo.byName('map', React);
```

```
// ES 6
import waldo from 'waldo';

// global search for properties with values of 1000
const matches = waldo.byValue(1000);

// search an object for all Arrays
const matches = waldo.byType(Array, myObj);
```

#####2. Standalone


#####3. In the Browser Console

You can paste waldobundle.min.js in the console (or make a bookmarklet from it) and then type _waldo_ commands directly in the console. When run in the console _waldo_ outputs its matches in a readable string format.

```js
// show all falsey values
waldo.byValueCoerced(false);

//search with a custom function
//e.g. all truthy properties named 'a'...
find.custom(function(searchTerm, obj, prop) {return (obj[prop] == true) && (prop == 'a')});
```
####circular references

Waldo detects circular references and cites them:

```js
let a = {x: b};
let b = {y: c};
let c = {z: a};
waldo.byName('z');
```

will log...
```
GLOBAL.c.z -> (<global.a>) Object {z: a}
```

Thanks to [John-David Dalton](https://github.com/jdalton) for introducing circular reference detection.

###Testing

To test both module and the standalone bundles:
```
npm test
```

To run continuous tests in watch mode:
```
npm run testc
```
